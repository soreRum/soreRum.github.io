<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sleeper Draft Sync + Custom Rankings</title>
  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Enable Tailwind dark mode via class
    tailwind.config = { darkMode: 'class' };
    // Apply saved theme ASAP to avoid FOUC
    (function () {
      const saved = localStorage.getItem('theme');
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const useDark = saved ? saved === 'dark' : prefersDark;
      if (useDark) document.documentElement.classList.add('dark');
    })();
  </script>
  <!-- Papa Parse for CSV -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-100 transition-colors">
  <div class="max-w-6xl mx-auto p-6">
    <header class="mb-6 flex items-center gap-3 justify-between">
      <div class="flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-8 h-8 text-slate-700 dark:text-slate-300"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm1 14.59l-3.3-3.3 1.42-1.42L13 13.76l4.88-4.88 1.42 1.42L13 16.59z"/></svg>
        <div>
          <h1 class="text-2xl font-bold">Sleeper Draft Sync + Custom Rankings</h1>
          <p class="text-sm text-slate-600 dark:text-slate-400">Upload your own CSV rankings, paste a Sleeper draft URL or ID, and auto-sync every 10s during live drafts.</p>
        </div>
      </div>
      <!-- Theme toggle -->
      <button id="themeToggle" class="px-4 py-2 rounded-xl bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm font-semibold">
        ðŸŒ™ Dark Mode
      </button>
    </header>

    <!-- Controls -->
    <section class="grid md:grid-cols-2 gap-4 mb-6">
      <div class="p-4 bg-white dark:bg-slate-800 rounded-2xl shadow">
        <h2 class="font-semibold mb-2">1) Upload your rankings (.csv)</h2>
        <input id="csvFile" type="file" accept=".csv" class="block w-full text-sm" />
        <p class="mt-2 text-xs text-slate-600 dark:text-slate-300">
          Tip: Your file can be in any column layout as long as it includes a <span class="font-medium">player name</span> column.
          If your sheet's first data row contains headers (e.g., "Player, Age, Tm, POS..."), this app will auto-detect and clean it.
        </p>
        <div id="uploadStatus" class="mt-2 text-sm"></div>
      </div>
      <div class="p-4 bg-white dark:bg-slate-800 rounded-2xl shadow">
        <h2 class="font-semibold mb-2">2) Enter Sleeper draft URL or ID</h2>
        <input id="draftInput" type="text" placeholder="e.g., https://sleeper.com/draft/nfl/123456789012345678 or 123456789012345678" class="w-full border rounded-xl px-3 py-2 text-sm dark:bg-slate-700 dark:border-slate-600" />
        <div class="mt-3 flex items-center gap-2">
          <button id="startBtn" class="px-4 py-2 rounded-xl bg-emerald-600 text-white text-sm font-semibold disabled:opacity-50">Start Sync</button>
          <button id="stopBtn" class="px-4 py-2 rounded-xl bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm font-semibold disabled:opacity-50" disabled>Stop</button>
          <span id=


